<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JKQTPlotter: Tutorial (JKQTPDatastore): 1-Dimensional Group Statistics with JKQTPDatastore</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="jkqtplotter_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JKQTPlotter
   </div>
   <div id="projectbrief">an extensive Qt4/Qt5 Plotter framework (including a fast variant and a LaTeX equation renderer!), written fully in C/C++ and without external dependencies</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_statistics_grouped_stat.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Tutorial (<a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a>): 1-Dimensional Group Statistics with <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md26">Barcharts &amp; Boxplots from categorized data</a><ul><li class="level2"><a href="#autotoc_md27">Generating a Dataset for Grouped Barcharts</a></li>
<li class="level2"><a href="#autotoc_md28">Calculating Grouped Statistics for a Barchart</a></li>
<li class="level2"><a href="#autotoc_md29">Calculating Grouped Statistics for a Boxplot</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md30">(Scatter-)Graphs with X/Y-errors from Categorized Data</a><ul><li class="level2"><a href="#autotoc_md31">Dataset for XY Scatter Graphs</a></li>
<li class="level2"><a href="#autotoc_md32">Calculating x- and y-Errors from Categorized Data</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md33">Screenshot of the full Program</a></li>
</ul>
</div>
<div class="textblock"><p>This tutorial project (see <code>./examples/datastore_groupedstat/</code>) explains several advanced functions of <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a> in combination with the [<a class="el" href="group__jkqtptools__math__statistics.html">JKQTPlotter Statistics Library</a>] conatined in <a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)This class is a QW...">JKQTPlotter</a>.</p>
<p><em><b>Note</b></em> that there are additional tutorial explaining other aspects of data mangement in <a class="el" href="class_j_k_q_t_p_datastore.html" title="This class manages data columns (with entries of type double ), used by JKQTPlotter/JKQTBasePlotter t...">JKQTPDatastore</a>:</p><ul>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore.html">Basic Usage of JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_iterators.html">Iterator-Based usage of JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_statistics.html">Advanced 1-Dimensional Statistics with JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_regression.html">Regression Analysis (with the Statistics Library)</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_statistics_grouped_stat.html">1-Dimensional Group Statistics with JKQTPDatastore</a></li>
<li><a class="el" href="_j_k_q_t_plotter_basic_j_k_q_t_p_datastore_statistics2_d.html">Advanced 2-Dimensional Statistics with JKQTPDatastore</a></li>
</ul>
<p>The source code of the main application can be found in <a href="https://github.com/jkriege2/JKQtPlotter/tree/master/examples/datastore_groupedstat/datastore_groupedstat.cpp"><code>datastore_groupedstat.cpp</code></a>. This tutorial cites only parts of this code to demonstrate different ways of working with data for the graphs.</p>
<h1><a class="anchor" id="autotoc_md26"></a>
Barcharts &amp; Boxplots from categorized data</h1>
<h2><a class="anchor" id="autotoc_md27"></a>
Generating a Dataset for Grouped Barcharts</h2>
<p>To demonstrate the grouped statistics, we first have to generate a dataset. The datapoints consist of pairs <code>&lt;group,value&gt;</code>, where the groups are encoded by the numbers 1,2,3 and in each group, several measurements are taken: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colBarRawGroup=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, rawdata, group&quot;</span>);</div><div class="line"><span class="keywordtype">size_t</span> colBarRawValue=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, rawdata, value&quot;</span>);</div><div class="line"></div><div class="line"><span class="comment">//      data for group 1</span></div><div class="line">datastore1-&gt;appendToColumns(colBarRawGroup, colBarRawValue, 1, 1.1);</div><div class="line">datastore1-&gt;appendToColumns(colBarRawGroup, colBarRawValue, 1, 1.5);</div><div class="line">datastore1-&gt;appendToColumns(colBarRawGroup, colBarRawValue, 1, 0.8);</div><div class="line"><span class="comment">// ...</span></div><div class="line"></div><div class="line"><span class="comment">//      data for group 2</span></div><div class="line">datastore1-&gt;appendToColumns(colBarRawGroup, colBarRawValue, 2, 2.2);</div><div class="line"><span class="comment">// ...</span></div><div class="line"></div><div class="line"><span class="comment">//      data for group 3</span></div><div class="line">datastore1-&gt;appendToColumns(colBarRawGroup, colBarRawValue, 3, 4.1);</div><div class="line"><span class="comment">// ...</span></div></div><!-- fragment --><p>Note that the data does not have to be sorted. You can add the dataset in any order!</p>
<p>This dataset can be visualized with a simple scatter plot: </p><div class="fragment"><div class="line"><a class="code" href="class_j_k_q_t_p_x_y_line_graph.html">JKQTPXYLineGraph</a>* gScatterForBar;</div><div class="line">plotbarchart-&gt;addGraph(gScatterForBar=<span class="keyword">new</span> <a class="code" href="class_j_k_q_t_p_x_y_line_graph.html">JKQTPXYLineGraph</a>(plotbarchart));</div><div class="line">gScatterForBar-&gt;<a class="code" href="class_j_k_q_t_p_x_y_graph.html#a972ee50c53accadade8880b3bd1110cc">setXYColumns</a>(colBarRawGroup, colBarRawValue);</div><div class="line">gScatterForBar-&gt;<a class="code" href="class_j_k_q_t_p_x_y_line_graph.html#a1202afd954530d0c71c9a745755f7ae0">setDrawLine</a>(<span class="keyword">false</span>);</div><div class="line">gScatterForBar-&gt;<a class="code" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#af278c2bde3ba2b26341d4921748e1923">setSymbolType</a>(<a class="code" href="group__jkqtptools__drawing.html#gga212568ec3a08aa8d047bdd11283e2b3ea7d1d103c92b5fb6152ddf135315f3449">JKQTPCross</a>);</div><div class="line">gScatterForBar-&gt;<a class="code" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#a7b5bdf1d3b33bcdc2ec82026e6fd55b9">setSymbolSize</a>(5);</div><div class="line">gScatterForBar-&gt;<a class="code" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#a9622acb8fb77c6915877acc6990c31bb">setSymbolColor</a>(<a class="code" href="group__jkqtpplotter__styling.html#ga4840ec94f56ddc9df4bf5d2c3d0c15ae">QColorWithAlphaF</a>(QColor(<span class="stringliteral">&quot;red&quot;</span>), 0.5));</div></div><!-- fragment --><p>The resulting plot looks like this:</p>
<img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat_barchartrawdata.png" alt="datastore_groupedstat_barchartrawdata" class="inline"/>
<h2><a class="anchor" id="autotoc_md28"></a>
Calculating Grouped Statistics for a Barchart</h2>
<p>Now we want to draw a barchart for every group, which indicates the average in each group. This is done using methods from the statistics library. First we need to group the data using <code><a class="el" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7" title="groups data from an input range inFirstCat / inFirstValue ... inLastCat / outFirstCat representing pa...">jkqtpstatGroupData()</a></code>, which assembles the data points in each group groupeddataBar </p><div class="fragment"><div class="line">std::map&lt;double, std::vector&lt;double&gt; &gt; groupeddataBar;</div><div class="line"><a class="code" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7">jkqtpstatGroupData</a>(datastore1-&gt;begin(colBarRawGroup), datastore1-&gt;end(colBarRawGroup),</div><div class="line">                   datastore1-&gt;begin(colBarRawValue), datastore1-&gt;end(colBarRawValue),</div><div class="line">                   groupeddataBar);</div></div><!-- fragment --><p> Now we can calculate the statistics for each group separately: Data is collected in new columns <code>colBarGroup</code>, <code>colBarAverage</code> and <code>colBarStdDev</code>. The statistics is then calculated by simply iterating over <code>groupeddataBar</code> and calling functions like <code><a class="el" href="group__jkqtptools__math__statistics__basic.html#ga6a829fb0253c9cbaf541e23c45292808" title="calculates the average of a given data range first ... last">jkqtpstatAverage()</a></code> for each group: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colBarGroup=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group&quot;</span>);</div><div class="line"><span class="keywordtype">size_t</span> colBarAverage=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-average&quot;</span>);</div><div class="line"><span class="keywordtype">size_t</span> colBarStdDev=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-stddev&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> it=groupeddataBar.begin(); it!=groupeddataBar.end(); ++it) {</div><div class="line">    datastore1-&gt;appendToColumn(colBarGroup, it-&gt;first);</div><div class="line">    datastore1-&gt;appendToColumn(colBarAverage, <a class="code" href="group__jkqtptools__math__statistics__basic.html#ga6a829fb0253c9cbaf541e23c45292808">jkqtpstatAverage</a>(it-&gt;second.begin(), it-&gt;second.end()));</div><div class="line">    datastore1-&gt;appendToColumn(colBarStdDev, <a class="code" href="group__jkqtptools__math__statistics__basic.html#ga0cbd4d4f762fe7c05fa143e643988c21">jkqtpstatStdDev</a>(it-&gt;second.begin(), it-&gt;second.end()));</div><div class="line">}</div></div><!-- fragment --><p>Finally the calculated groups are drawn: </p><div class="fragment"><div class="line"><a class="code" href="class_j_k_q_t_p_bar_vertical_error_graph.html">JKQTPBarVerticalErrorGraph</a>* gBar;</div><div class="line">plotbarchart-&gt;addGraph(gBar=<span class="keyword">new</span> <a class="code" href="class_j_k_q_t_p_bar_vertical_error_graph.html">JKQTPBarVerticalErrorGraph</a>(plotbarchart));</div><div class="line">gBar-&gt;<a class="code" href="class_j_k_q_t_p_x_y_graph.html#a972ee50c53accadade8880b3bd1110cc">setXYColumns</a>(colBarGroup, colBarAverage);</div><div class="line">gBar-&gt;<a class="code" href="class_j_k_q_t_p_y_graph_error_data.html#a52350a8da0cbce7a98e6da445ad28b11">setYErrorColumn</a>(static_cast&lt;int&gt;(colBarStdDev));</div></div><!-- fragment --><p>The resulting plot looks like this:</p>
<img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat_barchart.png" alt="datastore_groupedstat_barchart" class="inline"/>
<p>In order to safe yo the typing of the code above, shortcuts in the form of adaptors exist: </p><div class="fragment"><div class="line"><a class="code" href="group__jkqtptools__math__statistics__adaptors.html#ga600c56afca3abe69671e9cabd2cae4ed">jkqtpstatAddYErrorBarGraph</a>(plotbarchart-&gt;getPlotter(),</div><div class="line">                           datastore1-&gt;begin(colBarRawGroup), datastore1-&gt;end(colBarRawGroup),</div><div class="line">                           datastore1-&gt;begin(colBarRawValue), datastore1-&gt;end(colBarRawValue));</div></div><!-- fragment --><p> Also other flavors exist that generate different graphs (see the <a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)This class is a QW...">JKQTPlotter</a> documentation):</p><ul>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga2594a3fefc62777b4c63d13d96099b2a" title="create a JKQTPXYLineErrorGraph with y-direction error bars, calculated from average +/- stddev of gro...">jkqtpstatAddYErrorLineGraph()</a></code> / <code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga6901c403c4eb2b0f72670d15c73117d7" title="create a JKQTPXYLineErrorGraph with x-direction error bars, calculated from average +/- stddev of gro...">jkqtpstatAddXErrorLineGraph()</a></code></li>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga600c56afca3abe69671e9cabd2cae4ed" title="create a JKQTPBarVerticalErrorGraph with y-direction error bars, calculated from average +/- stddev o...">jkqtpstatAddYErrorBarGraph()</a></code> / <code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga6cc8beac9023ad48b22343a66c61737c" title="create a JKQTPBarHorizontalErrorGraph with x-direction error bars, calculated from average +/- stddev...">jkqtpstatAddXErrorBarGraph()</a></code></li>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga51cb51bbe2a584c8aa242984ffa3c2f7" title="create a JKQTPImpulsesVerticalErrorGraph with y-direction error bars, calculated from average +/- std...">jkqtpstatAddYErrorImpulsesGraph()</a></code> / <code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga16563094ef11ba297c7f04b7d05ec5d0" title="create a JKQTPImpulsesHorizontalErrorGraph with x-direction error bars, calculated from average +/- s...">jkqtpstatAddXErrorImpulsesGraph()</a></code></li>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gab1a9b7608b8fff658be1fbde17348151" title="create a JKQTPXYParametrizedErrorScatterGraph with y-direction error bars, calculated from average +/...">jkqtpstatAddYErrorParametrizedScatterGraph()</a></code> / <code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gacce5bfa5866603de716c3716ae2f9876" title="create a JKQTPXYParametrizedErrorScatterGraph with x-direction error bars, calculated from average +/...">jkqtpstatAddXErrorParametrizedScatterGraph()</a></code></li>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga2a52f76a24ae41e6a98278b6d93d4050" title="create a JKQTPFilledCurveYErrorGraph with y-direction error bars, calculated from average +/- stddev ...">jkqtpstatAddYErrorFilledCurveGraph()</a></code> / <code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga6b56bdf290964c8e0330333363c6e956" title="create a JKQTPFilledCurveXErrorGraph with x-direction error bars, calculated from average +/- stddev ...">jkqtpstatAddXErrorFilledCurveGraph()</a></code></li>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga4e4e2b27580bcfe51d60fb9a807cbbf5" title="create a plot with y-direction error bars, calculated from average +/- stddev of groups in the input ...">jkqtpstatAddYErrorGraph()</a></code> / <code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gab53ee6eab39c746a81fa00b5e1bc2767" title="create a plot with x-direction error bars, calculated from average +/- stddev of groups in the input ...">jkqtpstatAddXErrorGraph()</a></code></li>
</ul>
<h2><a class="anchor" id="autotoc_md29"></a>
Calculating Grouped Statistics for a Boxplot</h2>
<p>With the methods above we can also calculate more advanced statistics, like e.g. boxplots: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colBarMedian=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-median&quot;</span>);</div><div class="line"><span class="keywordtype">size_t</span> colBarMin=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-min&quot;</span>);</div><div class="line"><span class="keywordtype">size_t</span> colBarMax=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-max&quot;</span>);</div><div class="line"><span class="keywordtype">size_t</span> colBarQ25=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-Q25&quot;</span>);</div><div class="line"><span class="keywordtype">size_t</span> colBarQ75=datastore1-&gt;addColumn(<span class="stringliteral">&quot;barchart, group-Q75&quot;</span>);</div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> it=groupeddataBar.begin(); it!=groupeddataBar.end(); ++it) {</div><div class="line">    datastore1-&gt;appendToColumn(colBarMedian, <a class="code" href="group__jkqtptools__math__statistics__basic.html#ga5aa5e5dc787e5c891ae7d1eccd697003">jkqtpstatMedian</a>(it-&gt;second.begin(), it-&gt;second.end()));</div><div class="line">    datastore1-&gt;appendToColumn(colBarMin, <a class="code" href="group__jkqtptools__math__statistics__basic.html#ga964efee196e2d587b30037421cdda22a">jkqtpstatMinimum</a>(it-&gt;second.begin(), it-&gt;second.end()));</div><div class="line">    datastore1-&gt;appendToColumn(colBarMax, <a class="code" href="group__jkqtptools__math__statistics__basic.html#ga88fd1f99cd6703268c3065d69ba6b65d">jkqtpstatMaximum</a>(it-&gt;second.begin(), it-&gt;second.end()));</div><div class="line">    datastore1-&gt;appendToColumn(colBarQ25, <a class="code" href="group__jkqtptools__math__statistics__basic.html#ga6bad0f90e0326380c13b466115285a8f">jkqtpstatQuantile</a>(it-&gt;second.begin(), it-&gt;second.end(), 0.25));</div><div class="line">    datastore1-&gt;appendToColumn(colBarQ75, <a class="code" href="group__jkqtptools__math__statistics__basic.html#ga6bad0f90e0326380c13b466115285a8f">jkqtpstatQuantile</a>(it-&gt;second.begin(), it-&gt;second.end(), 0.75));</div><div class="line">}</div></div><!-- fragment --><p> The result can be plotted using <a class="el" href="class_j_k_q_t_p_boxplot_vertical_graph.html" title="This implements vertical boxplots, optionally also a notched boxplotThe x position is given in posCol...">JKQTPBoxplotVerticalGraph</a>, which receives a column for each value class of the final plot: </p><div class="fragment"><div class="line"><a class="code" href="class_j_k_q_t_p_boxplot_vertical_graph.html">JKQTPBoxplotVerticalGraph</a>* gBoxplot;</div><div class="line">plotboxplot-&gt;addGraph(gBoxplot=<span class="keyword">new</span> <a class="code" href="class_j_k_q_t_p_boxplot_vertical_graph.html">JKQTPBoxplotVerticalGraph</a>(plotboxplot));</div><div class="line">gBoxplot-&gt;<a class="code" href="class_j_k_q_t_p_boxplot_vertical_graph.html#af52fc9f3276d9064437f570b08fd483d">setPositionColumn</a>(colBarGroup);</div><div class="line">gBoxplot-&gt;<a class="code" href="class_j_k_q_t_p_boxplot_vertical_graph.html#a0d0e261412eea112331713f02dc1e33c">setMinColumn</a>(colBarMin);</div><div class="line">gBoxplot-&gt;<a class="code" href="class_j_k_q_t_p_boxplot_vertical_graph.html#ad9cf8d59d76542701bc5d40244113143">setMaxColumn</a>(colBarMax);</div><div class="line">gBoxplot-&gt;<a class="code" href="class_j_k_q_t_p_boxplot_vertical_graph.html#a064cdca22cfd237c1d09d42fff0c461f">setMedianColumn</a>(colBarMedian);</div><div class="line">gBoxplot-&gt;<a class="code" href="class_j_k_q_t_p_boxplot_vertical_graph.html#ad0233abd0170abd8d0f5d85d859966e2">setPercentile25Column</a>(colBarQ25);</div><div class="line">gBoxplot-&gt;<a class="code" href="class_j_k_q_t_p_boxplot_vertical_graph.html#a302888eb59b09d3d27e5984c9dfff4be">setPercentile75Column</a>(colBarQ75);</div></div><!-- fragment --><p>The resulting plot looks like this:</p>
<img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat_boxplot.png" alt="datastore_groupedstat_boxplot" class="inline"/>
<p>In order to safe yo the typing of the code above, shortcuts in the form of adaptors exist: </p><div class="fragment"><div class="line"><a class="code" href="group__jkqtptools__math__statistics__adaptors.html#gabb009418a4fd89bd6abffa1cf4e09fd4">jkqtpstatAddHBoxplotsAndOutliers</a>(plotboxplot-&gt;getPlotter(),</div><div class="line">                                datastore1-&gt;begin(colBarRawGroup), datastore1-&gt;end(colBarRawGroup),</div><div class="line">                                datastore1-&gt;begin(colBarRawValue), datastore1-&gt;end(colBarRawValue));</div></div><!-- fragment --><p> Also other flavors exist that generate different graphs (see the <a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)This class is a QW...">JKQTPlotter</a> documentation):</p><ul>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gaa24a945b5c1c9fa599bb755e43f647d9" title="create vertical boxplots of type JKQTPBoxplotVerticalGraph, from the 5-value-summary of groups in the...">jkqtpstatAddVBoxplotsAndOutliers()</a></code> / <code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gabb009418a4fd89bd6abffa1cf4e09fd4" title="create vertical boxplots of type JKQTPBoxplotHorizontalGraph, from the 5-value-summary of groups in t...">jkqtpstatAddHBoxplotsAndOutliers()</a></code></li>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gac29716297cc845af924555b989564daf" title="create vertical boxplots of type JKQTPBoxplotVerticalGraph, from the 5-value-summary of groups in the...">jkqtpstatVAddBoxplots()</a></code> / <code>jkqtpstatHAddBoxplots()</code></li>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga2c20b9a8bb2faaf9af91c7f9365d1195" title="create horizontal boxplots of type TGraph, from the 5-value-summary of groups in the input data">jkqtpstatAddBoxplots()</a></code></li>
</ul>
<h1><a class="anchor" id="autotoc_md30"></a>
(Scatter-)Graphs with X/Y-errors from Categorized Data</h1>
<h2><a class="anchor" id="autotoc_md31"></a>
Dataset for XY Scatter Graphs</h2>
<p>First we generate a second dataset, which is going to be used for a scaterplot. The datapoints consist of pairs <code>&lt;x,y&gt;</code>, that are based on a parabula with random deviations, both in x- and y-direction: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colScatterRawX=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatterplot, rawdata, x&quot;</span>);</div><div class="line"><span class="keywordtype">size_t</span> colScatterRawY=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatterplot, rawdata, y&quot;</span>);</div><div class="line">std::random_device rd; <span class="comment">// random number generators:</span></div><div class="line">std::mt19937 gen{rd()};</div><div class="line">std::normal_distribution&lt;&gt; d1{0,0.5};</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">size_t</span> N=100;</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">double</span> xmax=3.5;</div><div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i=0; <a class="code" href="namespacefontcoverage.html#aa8f0f6df10dc85e52c61d400861ec107">i</a>&lt;N; <a class="code" href="namespacefontcoverage.html#aa8f0f6df10dc85e52c61d400861ec107">i</a>++) {</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> x=(static_cast&lt;double&gt;(i)-static_cast&lt;double&gt;(N)/2.0)*xmax/(static_cast&lt;double&gt;(N)/2.0);</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> y=<a class="code" href="group__jkqtptools__math__basic.html#gacb0b84ffd616c54365266f907cedf400">jkqtp_sqr</a>(x)+2.0;</div><div class="line">    datastore1-&gt;appendToColumns(colScatterRawX, colScatterRawY, x+d1(gen), y+d1(gen));</div><div class="line">}</div></div><!-- fragment --><p>This dataset can be visualized: </p><div class="fragment"><div class="line"><a class="code" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html">JKQTPXYParametrizedScatterGraph</a>* gScatterRaw;</div><div class="line">plotscattererrors-&gt;addGraph(gScatterRaw=<span class="keyword">new</span> <a class="code" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html">JKQTPXYParametrizedScatterGraph</a>(plotscattererrors));</div><div class="line">gScatterRaw-&gt;<a class="code" href="class_j_k_q_t_p_x_y_graph.html#a972ee50c53accadade8880b3bd1110cc">setXYColumns</a>(colScatterRawX, colScatterRawY);</div><div class="line">gScatterRaw-&gt;<a class="code" href="class_j_k_q_t_p_x_y_line_graph.html#a1202afd954530d0c71c9a745755f7ae0">setDrawLine</a>(<span class="keyword">false</span>);</div><div class="line">gScatterRaw-&gt;<a class="code" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#af278c2bde3ba2b26341d4921748e1923">setSymbolType</a>(<a class="code" href="group__jkqtptools__drawing.html#gga212568ec3a08aa8d047bdd11283e2b3ea7d1d103c92b5fb6152ddf135315f3449">JKQTPCross</a>);</div><div class="line">gScatterRaw-&gt;<a class="code" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#a7b5bdf1d3b33bcdc2ec82026e6fd55b9">setSymbolSize</a>(5);</div></div><!-- fragment --><p>The resulting plot looks like this:</p>
<img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat_scatterrawdata.png" alt="datastore_groupedstat_scatterrawdata" class="inline"/>
<h2><a class="anchor" id="autotoc_md32"></a>
Calculating x- and y-Errors from Categorized Data</h2>
<p>Now we want to draw a scatterchart of the data, where data-points should be grouped together, in x-intervals of width 0.5. From all the points in each interval, we calculate the in both x- and y-direction the average and standard deviation. First we need to group the data using <code><a class="el" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7" title="groups data from an input range inFirstCat / inFirstValue ... inLastCat / outFirstCat representing pa...">jkqtpstatGroupData()</a></code>, which assembles the data points in each group groupeddataScatter. For the custom grouping of the datapoints we use the optional functor provided to <code><a class="el" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7" title="groups data from an input range inFirstCat / inFirstValue ... inLastCat / outFirstCat representing pa...">jkqtpstatGroupData()</a></code>: We use <code><a class="el" href="group__jkqtptools__math__statistics__grouped.html#ga155f200fac24b8cc5280ee6598d856a6" title="assign each value to groups  ,  ,  ,  , ...This is equivalent to">jkqtpstatGroupingCustomRound1D()</a></code> with given parameters 0.25 for the (center) location of the first bin and bin width 0.5. The functor is not built by hand (which would be possible using std::bind), but with the generator function <code><a class="el" href="group__jkqtptools__math__statistics__grouped.html#ga0a0a892c443b0fed35ea738abef9961b" title="generates a functor of jkqtpstatGroupingCustomRound1D() with the two paramaters firstGroupCenter and ...">jkqtpstatMakeGroupingCustomRound1D()</a></code>. In addition we use a variant of <code><a class="el" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7" title="groups data from an input range inFirstCat / inFirstValue ... inLastCat / outFirstCat representing pa...">jkqtpstatGroupData()</a></code>, which outputs a column with the category assigned to every data pair in the input data range: </p><div class="fragment"><div class="line">std::map&lt;double, std::pair&lt;std::vector&lt;double&gt;,std::vector&lt;double&gt; &gt; &gt; groupeddataScatter;</div><div class="line"><span class="keywordtype">size_t</span> colScatterRawGroup=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatterplot, rawdata, assigned-group&quot;</span>);</div><div class="line"><a class="code" href="group__jkqtptools__math__statistics__grouped.html#gad8a5870f70c3e43674f114b30de9ade7">jkqtpstatGroupData</a>(datastore1-&gt;begin(colScatterRawX), datastore1-&gt;end(colScatterRawX),</div><div class="line">                   datastore1-&gt;begin(colScatterRawY), datastore1-&gt;end(colScatterRawY),</div><div class="line">                   datastore1-&gt;backInserter(colScatterRawGroup),</div><div class="line">                   groupeddataScatter,</div><div class="line">                   <a class="code" href="group__jkqtptools__math__statistics__grouped.html#ga0a0a892c443b0fed35ea738abef9961b">jkqtpstatMakeGroupingCustomRound1D</a>(0.25, 0.5));</div></div><!-- fragment --><p>The column colScatterRawGroup can now be used to color the scatter graph: </p><div class="fragment"><div class="line">gScatterRaw-&gt;<a class="code" href="class_j_k_q_t_p_x_y_parametrized_scatter_graph.html#af984efc85c9073ad2ba835c378064db5">setColorColumn</a>(colScatterRawGroup);</div></div><!-- fragment --><p>Now we can calculate the statistics for each group separately: Data is collected in two new columns. Then the statistics is calculated by simply iterating over <code>groupeddataScatter</code> and calling functions like <code><a class="el" href="group__jkqtptools__math__statistics__basic.html#ga6a829fb0253c9cbaf541e23c45292808" title="calculates the average of a given data range first ... last">jkqtpstatAverage()</a></code> for each group: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> colScatterXAvg=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatter, x, average&quot;</span>);</div><div class="line"><span class="keywordtype">size_t</span> colScatterXStd=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatter, x, stddev&quot;</span>);</div><div class="line"><span class="keywordtype">size_t</span> colScatterYAvg=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatter, y, average&quot;</span>);</div><div class="line"><span class="keywordtype">size_t</span> colScatterYStd=datastore1-&gt;addColumn(<span class="stringliteral">&quot;scatter, y, stddev&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> (<span class="keyword">auto</span> it=groupeddataScatter.begin(); it!=groupeddataScatter.end(); ++it) {</div><div class="line">    datastore1-&gt;appendToColumn(colScatterXAvg, <a class="code" href="group__jkqtptools__math__statistics__basic.html#ga6a829fb0253c9cbaf541e23c45292808">jkqtpstatAverage</a>(it-&gt;second.first.begin(), it-&gt;second.first.end()));</div><div class="line">    datastore1-&gt;appendToColumn(colScatterXStd, <a class="code" href="group__jkqtptools__math__statistics__basic.html#ga0cbd4d4f762fe7c05fa143e643988c21">jkqtpstatStdDev</a>(it-&gt;second.first.begin(), it-&gt;second.first.end()));</div><div class="line">    datastore1-&gt;appendToColumn(colScatterYAvg, <a class="code" href="group__jkqtptools__math__statistics__basic.html#ga6a829fb0253c9cbaf541e23c45292808">jkqtpstatAverage</a>(it-&gt;second.second.begin(), it-&gt;second.second.end()));</div><div class="line">    datastore1-&gt;appendToColumn(colScatterYStd, <a class="code" href="group__jkqtptools__math__statistics__basic.html#ga0cbd4d4f762fe7c05fa143e643988c21">jkqtpstatStdDev</a>(it-&gt;second.second.begin(), it-&gt;second.second.end()));</div><div class="line">}</div></div><!-- fragment --><p>Finally the calculated groups are drawn </p><div class="fragment"><div class="line"><a class="code" href="class_j_k_q_t_p_x_y_line_error_graph.html">JKQTPXYLineErrorGraph</a>* gScatterErr;</div><div class="line">plotscattererrors-&gt;addGraph(gScatterErr=<span class="keyword">new</span> <a class="code" href="class_j_k_q_t_p_x_y_line_error_graph.html">JKQTPXYLineErrorGraph</a>(plotscattererrors));</div><div class="line">gScatterErr-&gt;<a class="code" href="class_j_k_q_t_p_x_y_graph.html#a972ee50c53accadade8880b3bd1110cc">setXYColumns</a>(colScatterXAvg, colScatterYAvg);</div><div class="line">gScatterErr-&gt;<a class="code" href="class_j_k_q_t_p_x_graph_error_data.html#a58fd7a997de8c4d80e809a3c47c1ba3e">setXErrorColumn</a>(static_cast&lt;int&gt;(colScatterXStd));</div><div class="line">gScatterErr-&gt;<a class="code" href="class_j_k_q_t_p_y_graph_error_data.html#a52350a8da0cbce7a98e6da445ad28b11">setYErrorColumn</a>(static_cast&lt;int&gt;(colScatterYStd));</div><div class="line">gScatterErr-&gt;<a class="code" href="class_j_k_q_t_p_graph_symbol_style_mixin.html#af278c2bde3ba2b26341d4921748e1923">setSymbolType</a>(<a class="code" href="group__jkqtptools__drawing.html#gga212568ec3a08aa8d047bdd11283e2b3ea65f979bf79b9759cdef9c7824cbddcff">JKQTPFilledTriangle</a>);</div><div class="line">gScatterErr-&gt;<a class="code" href="class_j_k_q_t_p_x_y_line_graph.html#a1202afd954530d0c71c9a745755f7ae0">setDrawLine</a>(<span class="keyword">false</span>);</div></div><!-- fragment --><p>The resulting plot looks like this:</p>
<img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat_scatter.png" alt="datastore_groupedstat_scatter" class="inline"/>
<p>In order to safe yo the typing of the code above, shortcuts in the form of adaptors exist: </p><div class="fragment"><div class="line"><a class="code" href="group__jkqtptools__math__statistics__adaptors.html#ga1542a890cedfb0c43891e3de90e600d2">jkqtpstatAddXYErrorLineGraph</a>(plotscattererrors-&gt;getPlotter(),</div><div class="line">                             datastore1-&gt;begin(colScatterRawX), datastore1-&gt;end(colScatterRawX),</div><div class="line">                             datastore1-&gt;begin(colScatterRawY), datastore1-&gt;end(colScatterRawY),</div><div class="line">                             <a class="code" href="group__jkqtptools__math__statistics__grouped.html#ga0a0a892c443b0fed35ea738abef9961b">jkqtpstatMakeGroupingCustomRound1D</a>(0.25, 0.5));</div></div><!-- fragment --><p> Also other flavors exist that generate different graphs (see the <a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)This class is a QW...">JKQTPlotter</a> documentation):</p><ul>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga1542a890cedfb0c43891e3de90e600d2" title="create a JKQTPXYLineErrorGraph with y-direction error bars, calculated from average +/- stddev of gro...">jkqtpstatAddXYErrorLineGraph()</a></code></li>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#ga848fa15c920e8c5a702a78f4058b9f51" title="create a JKQTPXYParametrizedErrorScatterGraph with y-direction error bars, calculated from average +/...">jkqtpstatAddXYErrorParametrizedScatterGraph()</a></code></li>
<li><code><a class="el" href="group__jkqtptools__math__statistics__adaptors.html#gab79c62360e1c457bf33159ebb287f926" title="create a plot with x- and y-direction error bars, calculated from directional average +/- stddev of g...">jkqtpstatAddXYErrorGraph()</a></code></li>
</ul>
<h1><a class="anchor" id="autotoc_md33"></a>
Screenshot of the full Program</h1>
<p>The output of the full test program <a href="https://github.com/jkriege2/JKQtPlotter/tree/master/examples/datastore_groupedstat/datastore_groupedstat.cpp"><code>datastore_groupedstat.cpp</code></a> looks like this:</p>
<img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/datastore_groupedstat.png" alt="datastore_groupedstat" class="inline"/>
 </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="example_tutorial_projects.html">Example &amp; Tutorial Projects</a></li>
    <li class="footer">Generated on Sat Sep 21 2019 10:14:38 for JKQTPlotter by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
