<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JKQTPlotter: Example (JKQTPlotter): Image Plots with Custom Palettes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="jkqtplotter_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">JKQTPlotter
   </div>
   <div id="projectbrief">an extensive Qt4/Qt5 Plotter framework (including a fast variant and a LaTeX equation renderer!), written fully in C/C++ and without external dependencies</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_j_k_q_t_plotter_image_plot_user_palette.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example (<a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)This class is a QW...">JKQTPlotter</a>): Image Plots with Custom Palettes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This project (see <code>./examples/imageplot_userpal/</code>) demonstrates how to use user-defined color-palettes for image plots. The source code of the main application is (see <a href="https://github.com/jkriege2/JKQtPlotter/tree/master/examples/imageplot_userpal/imageplot_userpal.cpp"><code>imageplot_userpal.cpp</code></a>).</p>
<h1><a class="anchor" id="autotoc_md68"></a>
Build Palettes Programmatically</h1>
<p><a class="el" href="class_j_k_q_t_plotter.html" title="plotter widget for scientific plots (uses JKQTBasePlotter to do the actual drawing)This class is a QW...">JKQTPlotter</a> comes with a large set of predefined color palettes, which are enumerated in <code>JKQTPMathImageColorPalette</code>. In addition you can build your own palettes as simple lookup-tables of type <code><a class="el" href="group__jkqtptools__qt.html#gaf50d2ee768eaece312b5eb4eeba8c6a4" title="Datatype to store lookup-tables used to map data values (scales to 0..size-1) onto RGB-colors.">JKQTPImageTools::LUTType</a></code> (which is a <code>QVector&lt;QRgb&gt;</code>) and register them in the system (using <code><a class="el" href="struct_j_k_q_t_p_image_tools.html#aa422583662c8dfa952c66fee416448a7" title="registers a new LUT defined by paletteLut and with the given name (computer-readable) for later use,...">JKQTPImageTools::registerPalette()</a></code>). There are several options available for building such a palette:</p><ol type="1">
<li>you can simply define a palette from single colors: <div class="fragment"><div class="line"><a class="code" href="group__jkqtptools__qt.html#gaf50d2ee768eaece312b5eb4eeba8c6a4">JKQTPImageTools::LUTType</a> pal{</div><div class="line">    QColor(<span class="stringliteral">&quot;blue&quot;</span>).rgb(), </div><div class="line">    QColor(<span class="stringliteral">&quot;green&quot;</span>).rgb(), </div><div class="line">    QColor(<span class="stringliteral">&quot;white&quot;</span>).rgb(), </div><div class="line">    QColor(<span class="stringliteral">&quot;yellow&quot;</span>).rgb(), </div><div class="line">    QColor(<span class="stringliteral">&quot;red&quot;</span>).rgb(), </div><div class="line">    QColor(<span class="stringliteral">&quot;red&quot;</span>).rgb()</div><div class="line">};</div></div><!-- fragment --> Such a palette will have exactly as many entries, as you specified: <img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/imageplot_userpal_palsimple.png" alt="palsimple" class="inline"/>
</li>
<li>Alternatively you can build a palette from a set of colors with assocziated positions on the values axis (typically 0..1 as these are in any way later mapped to the actual data range): <div class="fragment"><div class="line">QList&lt;QPair&lt;double, QRgb&gt; &gt; palsteps2;</div><div class="line">palsteps2&lt;&lt;qMakePair&lt;double, QRgb&gt;(0.00, QColor(<span class="stringliteral">&quot;blue&quot;</span>).rgba());</div><div class="line">palsteps2&lt;&lt;qMakePair&lt;double, QRgb&gt;(0.05, QColor(<span class="stringliteral">&quot;green&quot;</span>).rgba());</div><div class="line">palsteps2&lt;&lt;qMakePair&lt;double, QRgb&gt;(0.45, QColor(<span class="stringliteral">&quot;white&quot;</span>).rgba());</div><div class="line">palsteps2&lt;&lt;qMakePair&lt;double, QRgb&gt;(0.55, QColor(<span class="stringliteral">&quot;yellow&quot;</span>).rgba());</div><div class="line">palsteps2&lt;&lt;qMakePair&lt;double, QRgb&gt;(0.95, QColor(<span class="stringliteral">&quot;red&quot;</span>).rgba());</div><div class="line">palsteps2&lt;&lt;qMakePair&lt;double, QRgb&gt;(1.00, QColor(<span class="stringliteral">&quot;red&quot;</span>).rgba());</div><div class="line"></div><div class="line">pal=<a class="code" href="group__jkqtplotter__imagelots__tools___l_u_t_s.html#ga89bb7feb2c072c2ab978fe64e9259a6d">JKQTPBuildColorPaletteLUT</a>(palsteps2, <a class="code" href="struct_j_k_q_t_p_image_tools.html#ae0bf98fa4c6b14f0a5426c741d8094a4">JKQTPImageTools::LUTSIZE</a>);</div></div><!-- fragment --> Such a palette will have <code><a class="el" href="struct_j_k_q_t_p_image_tools.html#ae0bf98fa4c6b14f0a5426c741d8094a4" title="size of the lookup tables used by JKQTFPimagePlot_array2image()">JKQTPImageTools::LUTSIZE</a> (=255)</code> entries and the colors are not spaced equally: <img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/imageplot_userpal_palsteps2.png" alt="palsteps2" class="inline"/>
</li>
<li>The palettes so far had steps, but you can also give a series of nodes with positions (on the value axis) and RGB-colors there (e.g. <code>palsteps2</code> above) but then linearly interpolate between these by calling: <div class="fragment"><div class="line">pal=<a class="code" href="group__jkqtplotter__imagelots__tools___l_u_t_s.html#ga8328ab338bf6a5a4a0a8d42e24cad036">JKQTPBuildColorPaletteLUTLinInterpolate</a>(palsteps2, <a class="code" href="struct_j_k_q_t_p_image_tools.html#ae0bf98fa4c6b14f0a5426c741d8094a4">JKQTPImageTools::LUTSIZE</a>);</div></div><!-- fragment --> The resulting LUT is then: <img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/imageplot_userpal_2_linear.png" alt="imageplot_userpal_2_linear" class="inline"/>
</li>
<li>Finally there is a second way of linear interpolation, where linear segments are given for the three color channels separately. To use such a definition, call <code>JKQTPBuildColorPaletteLUTLinSegments</code> instead (see documenttaion there).</li>
</ol>
<p>For each of these options, you finally call <code><a class="el" href="struct_j_k_q_t_p_image_tools.html#aa422583662c8dfa952c66fee416448a7" title="registers a new LUT defined by paletteLut and with the given name (computer-readable) for later use,...">JKQTPImageTools::registerPalette()</a></code> to make them known to the system: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> userpalette_id=<a class="code" href="struct_j_k_q_t_p_image_tools.html#aa422583662c8dfa952c66fee416448a7">JKQTPImageTools::registerPalette</a>(<span class="stringliteral">&quot;userpal_computer_readable_name&quot;</span>, pal, QObject::tr(<span class="stringliteral">&quot;User Palette Human-Readable Name&quot;</span>));</div></div><!-- fragment --><p> This function returns an integer, which you can cast to a <code>JKQTPMathImageColorPalette</code> to use your new palette: </p><div class="fragment"><div class="line"><a class="code" href="class_j_k_q_t_p_column_math_image.html">JKQTPColumnMathImage</a>* graph=<span class="keyword">new</span> <a class="code" href="class_j_k_q_t_p_column_math_image.html">JKQTPColumnMathImage</a>(plot);</div><div class="line"><span class="comment">// ...</span></div><div class="line">graph-&gt;<a class="code" href="class_j_k_q_t_p_color_palette_style_and_tools_mixin.html#a087c99ac5796bd0e6863394b0d5a7732">setPalette</a>(static_cast&lt;JKQTPMathImageColorPalette&gt;(userpalette_id));</div></div><!-- fragment --><h1><a class="anchor" id="autotoc_md69"></a>
Load Palettes from Files</h1>
<p>In addition to building palettes/LUTs programmatically, as shown above, you can simply load palettes from files using: </p><div class="fragment"><div class="line"><a class="code" href="struct_j_k_q_t_p_image_tools.html#a67d3e8577c39fe7b80a8b09895bf4b75">JKQTPImageTools::registerPalettesFromFile</a>(<span class="stringliteral">&quot;:/usercolorpalettes/palettes/All_idl_cmaps.xml&quot;</span>);</div></div><!-- fragment --><p>This function may load different file formats (discriminated by the extension):</p><ol type="1">
<li>XML-files (extension <code>.xml</code>) may contain one or more color palettes and should be formatted as follows: <div class="fragment"><div class="line">&lt;<span class="keywordtype">ColorMap</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;PALETTENAME&quot;</span> <span class="keyword">space</span>=<span class="stringliteral">&quot;RGB&quot;</span>&gt;</div><div class="line">  &lt;<span class="keywordtype">Point</span> <span class="keyword">x</span>=<span class="stringliteral">&quot;scalar&quot;</span> <span class="keyword">r</span>=<span class="stringliteral">&quot;RED&quot;</span> <span class="keyword">g</span>=<span class="stringliteral">&quot;GREEN&quot;</span> <span class="keyword">b</span>=<span class="stringliteral">&quot;BLUE&quot;</span>/&gt;</div><div class="line">  &lt;<span class="keywordtype">Point</span> <span class="keyword">x</span>=<span class="stringliteral">&quot;scalar&quot;</span> <span class="keyword">r</span>=<span class="stringliteral">&quot;RED&quot;</span> <span class="keyword">g</span>=<span class="stringliteral">&quot;GREEN&quot;</span> <span class="keyword">b</span>=<span class="stringliteral">&quot;BLUE&quot;</span>/&gt;</div><div class="line">  ...</div><div class="line">&lt;/<span class="keywordtype">ColorMap</span>&gt;</div></div><!-- fragment --> or with several palettes in one file: <div class="fragment"><div class="line">&lt;<span class="keywordtype">ColorMaps</span>&gt;</div><div class="line">    &lt;<span class="keywordtype">ColorMap</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;PALETTENAME&quot;</span> <span class="keyword">space</span>=<span class="stringliteral">&quot;RGB&quot;</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">Point</span> <span class="keyword">x</span>=<span class="stringliteral">&quot;scalar&quot;</span> <span class="keyword">r</span>=<span class="stringliteral">&quot;RED&quot;</span> <span class="keyword">g</span>=<span class="stringliteral">&quot;GREEN&quot;</span> <span class="keyword">b</span>=<span class="stringliteral">&quot;BLUE&quot;</span>/&gt;</div><div class="line">      &lt;<span class="keywordtype">Point</span> <span class="keyword">x</span>=<span class="stringliteral">&quot;scalar&quot;</span> <span class="keyword">r</span>=<span class="stringliteral">&quot;RED&quot;</span> <span class="keyword">g</span>=<span class="stringliteral">&quot;GREEN&quot;</span> <span class="keyword">b</span>=<span class="stringliteral">&quot;BLUE&quot;</span>/&gt;</div><div class="line">      ...</div><div class="line">    &lt;/<span class="keywordtype">ColorMap</span>&gt;</div><div class="line">    &lt;<span class="keywordtype">ColorMap</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;PALETTENAME&quot;</span> <span class="keyword">space</span>=<span class="stringliteral">&quot;RGB&quot;</span>&gt;</div><div class="line">      &lt;<span class="keywordtype">Point</span> <span class="keyword">x</span>=<span class="stringliteral">&quot;scalar&quot;</span> <span class="keyword">r</span>=<span class="stringliteral">&quot;RED&quot;</span> <span class="keyword">g</span>=<span class="stringliteral">&quot;GREEN&quot;</span> <span class="keyword">b</span>=<span class="stringliteral">&quot;BLUE&quot;</span>/&gt;</div><div class="line">      &lt;<span class="keywordtype">Point</span> <span class="keyword">x</span>=<span class="stringliteral">&quot;scalar&quot;</span> <span class="keyword">r</span>=<span class="stringliteral">&quot;RED&quot;</span> <span class="keyword">g</span>=<span class="stringliteral">&quot;GREEN&quot;</span> <span class="keyword">b</span>=<span class="stringliteral">&quot;BLUE&quot;</span>/&gt;</div><div class="line">      ...</div><div class="line">    &lt;/<span class="keywordtype">ColorMap</span>&gt;</div><div class="line">    ...</div><div class="line">&lt;/<span class="keywordtype">ColorMaps</span>&gt;</div></div><!-- fragment --></li>
<li>CSV-files (extensions <code>.csv</code>, <code>.rgb</code>, <code>.pal</code>) are simply a list of 3 or 4 comma-separated values: <div class="fragment"><div class="line">red, green, blue</div><div class="line">red, green, blue</div><div class="line">...</div></div><!-- fragment --> or: <div class="fragment"><div class="line">scalar, red, green, blue</div><div class="line">scalar, red, green, blue</div><div class="line">...</div></div><!-- fragment --></li>
</ol>
<p>By default the palettes are simply read from the files as raw data. Alternatively you can linearly interpolate between the nodes in the file by calling </p><div class="fragment"><div class="line"><a class="code" href="struct_j_k_q_t_p_image_tools.html#a67d3e8577c39fe7b80a8b09895bf4b75">JKQTPImageTools::registerPalettesFromFile</a>(<span class="stringliteral">&quot;:/usercolorpalettes/palettes/All_idl_cmaps.xml&quot;</span>, <span class="keyword">true</span>);</div></div><!-- fragment --><p>Examples for such palette files can be found here: <a href="https://github.com/jkriege2/JKQtPlotter/tree/master/examples/imageplot_userpal/palettes/">/examples/imageplot_userpal/palettes/</a></p>
<h1><a class="anchor" id="autotoc_md70"></a>
Main Program of the Example (GUI)</h1>
<p>The rest of the example program <a href="https://github.com/jkriege2/JKQtPlotter/tree/master/examples/imageplot_userpal/imageplot_userpal.cpp"><code>imageplot_userpal.cpp</code></a> just generates a 2D function plot as a color-map and displays it ... </p><div class="fragment"><div class="line"><span class="comment">// 1. create a window containing a plotter and a combobox to select the color palette</span></div><div class="line"><span class="comment">//    ... and get a pointer to the internal datastore (for convenience)</span></div><div class="line">QWidget win;</div><div class="line">QVBoxLayout* lay=<span class="keyword">new</span> QVBoxLayout();</div><div class="line">win.setLayout(lay);</div><div class="line"><a class="code" href="class_j_k_q_t_p_math_image_color_palette_combo_box.html">JKQTPMathImageColorPaletteComboBox</a>* cmbPalette=<span class="keyword">new</span> <a class="code" href="class_j_k_q_t_p_math_image_color_palette_combo_box.html">JKQTPMathImageColorPaletteComboBox</a>(&amp;win);</div><div class="line">lay-&gt;addWidget(cmbPalette);</div><div class="line"><a class="code" href="class_j_k_q_t_plotter.html">JKQTPlotter</a>* plot=<span class="keyword">new</span> <a class="code" href="class_j_k_q_t_plotter.html">JKQTPlotter</a>(&amp;win);</div><div class="line">lay-&gt;addWidget(plot);</div><div class="line"><a class="code" href="class_j_k_q_t_p_datastore.html">JKQTPDatastore</a>* ds=plot-&gt;<a class="code" href="class_j_k_q_t_plotter.html#a98d17ba77ef46da2b7d7f24637f12842">getDatastore</a>();</div><div class="line"></div><div class="line"><span class="comment">// 2. now we create data for the charts (taken from https://commons.wikimedia.org/wiki/File:Energiemix_Deutschland.svg)</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> NX=100; <span class="comment">// image dimension in x-direction [pixels]</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> NY=NX; <span class="comment">// image dimension in x-direction [pixels]</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">double</span> dx=0.6e-2; <span class="comment">// size of a pixel in x-direction [micrometers]</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">double</span> dy=0.6e-2; <span class="comment">// size of a pixel in x-direction [micrometers]</span></div><div class="line"></div><div class="line"><span class="comment">// 2.1 Parameters for airy disk plot (see https://en.wikipedia.org/wiki/Airy_disk)</span></div><div class="line"><span class="keywordtype">double</span> NA=1.1; <span class="comment">// numerical aperture of lens</span></div><div class="line"><span class="keywordtype">double</span> wavelength=488e-3; <span class="comment">// wavelength of the light [micrometers]</span></div><div class="line"></div><div class="line"><span class="comment">// 2.2 calculate image of airy disk in a row-major array and immediately store the values</span></div><div class="line"><span class="comment">//     in a new image column cAiryDisk</span></div><div class="line"><span class="keywordtype">size_t</span> cAiryDisk=ds-&gt;<a class="code" href="class_j_k_q_t_p_datastore.html#a04e406f2bcec13a3f5bd694c7cb74e54">addCalculatedImageColumn</a>(NX, NY, [&amp;](<span class="keywordtype">size_t</span> ix, <span class="keywordtype">size_t</span> iy)-&gt;<span class="keywordtype">double</span> {</div><div class="line">    <span class="keywordtype">double</span> x=static_cast&lt;double&gt;(static_cast&lt;int&gt;(ix)-NX/2)*dx;</div><div class="line">    <span class="keywordtype">double</span> y=static_cast&lt;double&gt;(static_cast&lt;int&gt;(iy)-NY/2)*dy;</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> r=sqrt(x*x+y*y);</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">double</span> v=2.0*M_PI*NA*r/wavelength;</div><div class="line">    <span class="keywordflow">if</span> (ix==NX/2 &amp;&amp; iy==NY/2) <span class="keywordflow">return</span> 1.0;</div><div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">return</span> pow(2.0*j1(v)/v, 2);</div><div class="line">}, <span class="stringliteral">&quot;imagedata&quot;</span>);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 3. create a graph (JKQTPColumnMathImage) with the column created above as data</span></div><div class="line"><span class="comment">//    The data is color-coded with the color-palette JKQTPMathImageMATLAB</span></div><div class="line"><span class="comment">//    the converted range of data is determined automatically because setAutoImageRange(true)</span></div><div class="line"><a class="code" href="class_j_k_q_t_p_column_math_image.html">JKQTPColumnMathImage</a>* graph=<span class="keyword">new</span> <a class="code" href="class_j_k_q_t_p_column_math_image.html">JKQTPColumnMathImage</a>(plot);</div><div class="line">graph-&gt;<a class="code" href="class_j_k_q_t_p_math_image.html#a12c1ea21eed55cd34899742f15b17362">setTitle</a>(<span class="stringliteral">&quot;default MATLAB palette&quot;</span>);</div><div class="line"><span class="comment">// set the image column with the data</span></div><div class="line">graph-&gt;<a class="code" href="class_j_k_q_t_p_column_math_image.html#a64d8443502002fe626cbe55799f3c198">setImageColumn</a>(cAiryDisk);</div><div class="line"><span class="comment">// where does the image start in the plot, given in plot-axis-coordinates (bottom-left corner)</span></div><div class="line">graph-&gt;<a class="code" href="class_j_k_q_t_p_image_base.html#a6f40e47f3d54070c6040406932b793da">setX</a>(0);</div><div class="line">graph-&gt;<a class="code" href="class_j_k_q_t_p_image_base.html#acd02ce7527c76be7c9184073b76c31a6">setY</a>(0);</div><div class="line"><span class="comment">// width and height of the image in plot-axis-coordinates</span></div><div class="line">graph-&gt;<a class="code" href="class_j_k_q_t_p_image_base.html#ab7dafad9c0f645769850e6285b1d2ad6">setWidth</a>(1);</div><div class="line">graph-&gt;<a class="code" href="class_j_k_q_t_p_image_base.html#a304f101a196b2b7e8a0287c39dd42355">setHeight</a>(1);</div><div class="line"><span class="comment">// color-map is taken from cmbPalette</span></div><div class="line">plot-&gt;connect(cmbPalette, &amp;<a class="code" href="class_j_k_q_t_p_math_image_color_palette_combo_box.html#af254c526cb22fa86498220c8cf70c229">JKQTPMathImageColorPaletteComboBox::currentPaletteChanged</a>,[&amp;](<a class="code" href="group__jkqtplotter__imagelots__tools.html#gaae2f1de8b42bb1734243b4201f4aa72d">JKQTPMathImageColorPalette</a> p) { graph-&gt;<a class="code" href="class_j_k_q_t_p_color_palette_style_and_tools_mixin.html#a087c99ac5796bd0e6863394b0d5a7732">setPalette</a>(p); plot-&gt;<a class="code" href="class_j_k_q_t_plotter.html#aebce042360ddc51b50472760ed272f7d">redrawPlot</a>(); });</div><div class="line">cmbPalette-&gt;<a class="code" href="class_j_k_q_t_p_math_image_color_palette_combo_box.html#a32cda9650a85354cba07690aee882e95">setCurrentColorPalette</a>(graph-&gt;<a class="code" href="class_j_k_q_t_p_color_palette_style_and_tools_mixin.html#a690a6c7d72ecb7e735519974c0a1309a">getPalette</a>());</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 4. add the graphs to the plot, so it is actually displayed</span></div><div class="line">plot-&gt;<a class="code" href="class_j_k_q_t_plotter.html#a63a54c5342d664c35ffb3d532ba26b99">addGraph</a>(graph);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 5. fix axis and plot aspect ratio to 1</span></div><div class="line">plot-&gt;<a class="code" href="class_j_k_q_t_plotter.html#ae4f1ab656cfc37b600667853a1b23686">getPlotter</a>()-&gt;<a class="code" href="class_j_k_q_t_base_plotter.html#a1360fa41c72a05e4142527e3322e2d61">setMaintainAspectRatio</a>(<span class="keyword">true</span>);</div><div class="line">plot-&gt;<a class="code" href="class_j_k_q_t_plotter.html#ae4f1ab656cfc37b600667853a1b23686">getPlotter</a>()-&gt;<a class="code" href="class_j_k_q_t_base_plotter.html#a3fdaa585b8b1a150321b19742091ddaa">setMaintainAxisAspectRatio</a>(<span class="keyword">true</span>);</div><div class="line"></div><div class="line"><span class="comment">// 6. autoscale the plot so the graph is contained</span></div><div class="line">plot-&gt;<a class="code" href="class_j_k_q_t_plotter.html#a0ed800587c1f3f5ab36dd5422c101e28">zoomToFit</a>();</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 8. show plotter and make it a decent size</span></div><div class="line">win.show();</div><div class="line">win.resize(500,550);</div><div class="line">win.setWindowTitle(<span class="stringliteral">&quot;JKQTPColumnMathImage, User Palettes&quot;</span>);</div></div><!-- fragment --><p> ...along with a <code><a class="el" href="class_j_k_q_t_p_math_image_color_palette_combo_box.html" title="class to plot an image from an 2-dimensional array of values">JKQTPMathImageColorPaletteComboBox</a></code> to select a colormap and redraw the plot: </p><div class="fragment"><div class="line"><a class="code" href="class_j_k_q_t_p_math_image_color_palette_combo_box.html">JKQTPMathImageColorPaletteComboBox</a>* cmbPalette=<span class="keyword">new</span> <a class="code" href="class_j_k_q_t_p_math_image_color_palette_combo_box.html">JKQTPMathImageColorPaletteComboBox</a>(&amp;win);</div><div class="line"><span class="comment">// ... </span></div><div class="line">plot-&gt;connect(cmbPalette, &amp;<a class="code" href="class_j_k_q_t_p_math_image_color_palette_combo_box.html#af254c526cb22fa86498220c8cf70c229">JKQTPMathImageColorPaletteComboBox::currentPaletteChanged</a>,[&amp;](<a class="code" href="group__jkqtplotter__imagelots__tools.html#gaae2f1de8b42bb1734243b4201f4aa72d">JKQTPMathImageColorPalette</a> p) { graph-&gt;<a class="code" href="class_j_k_q_t_p_color_palette_style_and_tools_mixin.html#a087c99ac5796bd0e6863394b0d5a7732">setPalette</a>(p); plot-&gt;<a class="code" href="class_j_k_q_t_plotter.html#aebce042360ddc51b50472760ed272f7d">redrawPlot</a>(); });</div><div class="line">cmbPalette-&gt;<a class="code" href="class_j_k_q_t_p_math_image_color_palette_combo_box.html#a32cda9650a85354cba07690aee882e95">setCurrentColorPalette</a>(graph-&gt;<a class="code" href="class_j_k_q_t_p_color_palette_style_and_tools_mixin.html#a690a6c7d72ecb7e735519974c0a1309a">getPalette</a>());</div></div><!-- fragment --><p>It also adds two <code>QPushButton</code>s that allow to save the current or all registered color-palettes to small PNG-Files: </p><div class="fragment"><div class="line">QPushButton* btnSavePal=<span class="keyword">new</span> QPushButton(QObject::tr(<span class="stringliteral">&quot;save current palette&quot;</span>), &amp;win);</div><div class="line">btnSavePal-&gt;connect(btnSavePal, &amp;QPushButton::clicked, [&amp;]() {</div><div class="line">    <span class="keyword">auto</span> img=<a class="code" href="struct_j_k_q_t_p_image_tools.html#ae04d620e9a11fac1b77be37b0bbb8a18">JKQTPImageTools::GetPaletteImage</a>(cmbPalette-&gt;<a class="code" href="class_j_k_q_t_p_math_image_color_palette_combo_box.html#aa22f049b565c889d9569dc6513a26ed9">currentColorPalette</a>(), <a class="code" href="struct_j_k_q_t_p_image_tools.html#ae0bf98fa4c6b14f0a5426c741d8094a4">JKQTPImageTools::LUTSIZE</a>, 16);</div><div class="line">    img.save(<a class="code" href="struct_j_k_q_t_p_image_tools.html#a3f6bd8c48baa91f430603dc21db8870d">JKQTPImageTools::JKQTPMathImageColorPalette2String</a>(cmbPalette-&gt;<a class="code" href="class_j_k_q_t_p_math_image_color_palette_combo_box.html#aa22f049b565c889d9569dc6513a26ed9">currentColorPalette</a>())+<span class="stringliteral">&quot;.png&quot;</span>);</div><div class="line">});</div><div class="line">lay-&gt;addWidget(btnSavePal);</div><div class="line">QPushButton* btnSaveAllPal=<span class="keyword">new</span> QPushButton(QObject::tr(<span class="stringliteral">&quot;save all palettes&quot;</span>), &amp;win);</div><div class="line">btnSavePal-&gt;connect(btnSaveAllPal, &amp;QPushButton::clicked, [&amp;]() {</div><div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> pn: <a class="code" href="struct_j_k_q_t_p_image_tools.html#aeb3c6ce849d0b7c7309b858bf2faf8ef">JKQTPImageTools::getPredefinedPalettes</a>()) {</div><div class="line">        <span class="keyword">auto</span> p=<a class="code" href="struct_j_k_q_t_p_image_tools.html#a971bae64a802f7f580690f07b5c72167">JKQTPImageTools::String2JKQTPMathImageColorPalette</a>(pn);</div><div class="line">        <span class="keyword">auto</span> img=<a class="code" href="struct_j_k_q_t_p_image_tools.html#ae04d620e9a11fac1b77be37b0bbb8a18">JKQTPImageTools::GetPaletteImage</a>(p, <a class="code" href="struct_j_k_q_t_p_image_tools.html#ae0bf98fa4c6b14f0a5426c741d8094a4">JKQTPImageTools::LUTSIZE</a>, 16);</div><div class="line">        img.save(<span class="stringliteral">&quot;palette_&quot;</span>+<a class="code" href="struct_j_k_q_t_p_image_tools.html#a3f6bd8c48baa91f430603dc21db8870d">JKQTPImageTools::JKQTPMathImageColorPalette2String</a>(p)+<span class="stringliteral">&quot;.png&quot;</span>);</div><div class="line">    }</div><div class="line">});</div><div class="line">lay-&gt;addWidget(btnSaveAllPal);</div></div><!-- fragment --><p>The whole program looks like this:</p>
<img src="https://raw.githubusercontent.com/jkriege2/JKQtPlotter/master/screenshots/imageplot_userpal_program.png" alt="imageplot_userpal_program" class="inline"/>
 </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="example_tutorial_projects.html">Example &amp; Tutorial Projects</a></li>
    <li class="footer">Generated on Sat Sep 21 2019 10:14:38 for JKQTPlotter by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
